{
  "name": "aws-crt-swift",
  "enabled": true,
  "needs_compiler": false,
  "build_steps": [
    "swift build --version",
    "swift build -c release"
  ],
  "test_steps": [
    "swift test"
  ],
  "hosts": {
    "ubuntu": {},
    "macos": {},
    "al2": {},
    "centos": {
      "_comment": "centos uses an ancient version of glibc that uses __block as a variable, which is reserved by swift/clang",
      "pre_build_steps": ["sed -i -e 's/\\*__block/\\*__libc_block/g' /usr/include/unistd.h"]
    },
    "al2012": {
      "enabled": false
    },
    "alpine": {
      "enabled": false
    },
    "windows": {
      "enabled": false
    }
  },
  "targets": {
    "ios": {
      "!build_steps": [
        "xcodebuild -scheme AwsCommonRuntimeKit -destination 'generic/platform=iOS'"
      ]
    },
    "macos": {
      "!test_steps": [
        "./integ_test.sh"
      ]
    }
  }
}
