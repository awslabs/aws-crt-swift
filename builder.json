{
  "name": "aws-crt-swift",
  "enabled": true,
  "needs_compiler": false,
  "build_steps": [
    "swift --version",
    "swift build -c release"
  ],
  "run_tests": true,
  "test_steps": [
    "crt-ci-prep"
  ],
  "hosts": {
    "al2012": {
      "enabled": false
    },
    "alpine": {
      "enabled": false
    },
    "windows": {
      "enabled": false
    }
  },
  "targets": {
    "ios": {
      "!build_steps": [
        "xcodebuild -scheme AwsCommonRuntimeKit -destination 'generic/platform=iOS'"
      ],
      "!test_steps": [
        "crt-ci-prep",
        "xcode-tests"
       ]
    },
    "tvos": {
      "!build_steps": [
        "xcodebuild -scheme AwsCommonRuntimeKit -destination 'generic/platform=tvOS'"
      ],
      "!test_steps": [
        "crt-ci-prep",
        "xcode-tests"
      ]
    },
    "watchos": {
      "!build_steps": [
        "xcodebuild -scheme AwsCommonRuntimeKit -destination 'generic/platform=watchOS'"
      ],
      "!test_steps": [
        "crt-ci-prep",
        "xcode-tests"
      ]
    },
    "macos": {
      "+test_steps": [
        "uname -a",
        "sudo -E security default-keychain",
        "security list-keychains",
        "security set-keychain-settings /Users/runner/Library/Keychains/login.keychain-db",
        "sudo -E xcodebuild -scheme aws-crt-swift-Package test -destination 'platform=OS X'",
        "./integ_test.sh"
      ]
    }
  }
}
